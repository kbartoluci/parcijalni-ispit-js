const formElement=document.querySelector("#term-form"),formQueryElement=document.querySelector("#term-form-query"),songsErrorElement=document.querySelector("#songs-error"),songsResult=document.querySelector("#songs-result");function showError(e){songsErrorElement.innerHTML=e}function showSongs(e){if(songsResult.innerHTML="",null==e)return;const t=document.createElement("table"),n=document.createElement("tr"),r=document.createElement("th"),o=document.createElement("th");r.innerHTML="Track name",o.innerHTML="Artist Name",n.append(r),n.append(o),t.append(n);for(let n=0;n<e.length;n++){const r=e[n],o=document.createElement("tr"),s=document.createElement("td"),l=document.createElement("td");s.innerHTML=r.trackName,l.innerHTML=r.artistName,o.append(s),o.append(l),t.append(o)}songsResult.append(t)}formElement.addEventListener("submit",function(e){e.preventDefault();const t=(formQueryElement.value||"").trim().toLocaleLowerCase();if(""===t)return showError("Please enter term"),void showSongs(null);document.getElementById("loader").style.display="block",fetch(`https://itunes.apple.com/search?term=${t}&entity=song`).then(e=>{if(e.ok)return document.getElementById("loader").style.display="none",e.json();throw new Error("Could not find songs")}).then(e=>{showError(""),showSongs(e.results)}).catch(e=>{document.getElementById("loader").style.display="none",showError(e.message),showSongs(null)})});